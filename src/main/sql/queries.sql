/*начальный запрос: заполнение данными*/
use dbtrain;
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('1', '1', '2', '2016-00-00 07:00:00', '2016-00-00 08:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('2', '1', '7', '2016-00-00 07:30:00', '2016-00-00 08:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('3', '1', '18', '2016-00-00 10:30:00', '2016-00-00 11:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('4', '1', '16', '2016-00-00 14:00:00', '2016-00-00 15:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('5', '1', '23', '2016-00-00 14:30:00', '2016-00-00 15:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('6', '1', '2', '2016-00-00 15:30:00', '2016-00-00 16:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('7', '1', '12', '2016-00-00 16:00:00', '2016-00-00 17:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('8', '1', '19', '2016-00-00 17:30:00', '2016-00-00 18:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('9', '2', '3', '2016-00-00 09:00:00', '2016-00-00 10:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('10', '2', '12', '2016-00-00 10:00:00', '2016-00-00 11:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('11', '2', '8', '2016-00-00 11:30:00', '2016-00-00 12:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('12', '2', '13', '2016-00-00 12:00:00', '2016-00-00 13:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('13', '2', '21', '2016-00-00 12:30:00', '2016-00-00 13:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('14', '2', '20', '2016-00-00 13:30:00', '2016-00-00 14:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('15', '2', '3', '2016-00-00 17:30:00', '2016-00-00 18:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('16', '2', '24', '2016-00-00 18:30:00', '2016-00-00 19:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('17', '3', '17', '2016-00-00 08:30:00', '2016-00-00 09:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('18', '3', '6', '2016-00-00 09:30:00', '2016-00-00 10:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('19', '3', '4', '2016-00-00 11:00:00', '2016-00-00 12:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('20', '3', '9', '2016-00-00 14:00:00', '2016-00-00 15:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('21', '3', '5', '2016-00-00 15:00:00', '2016-00-00 16:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('22', '3', '22', '2016-00-00 16:30:00', '2016-00-00 17:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('23', '3', '14', '2016-00-00 18:00:00', '2016-00-00 19:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('24', '3', '4', '2016-00-00 19:30:00', '2016-00-00 20:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('25', '4', '22', '2016-00-00 10:30:00', '2016-00-00 11:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('26', '4', '11', '2016-00-00 12:00:00', '2016-00-00 13:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('27', '4', '1', '2016-00-00 13:00:00', '2016-00-00 14:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('28', '4', '7', '2016-00-00 13:30:00', '2016-00-00 14:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('29', '4', '17', '2016-00-00 15:30:00', '2016-00-00 16:30:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('30', '4', '15', '2016-00-00 16:00:00', '2016-00-00 17:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('31', '4', '10', '2016-00-00 18:00:00', '2016-00-00 19:00:00', '1');
INSERT INTO `dbtrain`.`schedule` (`id`, `Station_id`, `Train_id`, `departureDate`, `arrivalDate`, `status`) VALUES ('32', '4', '1', '2016-00-00 21:30:00', '2016-00-00 22:30:00', '1');

/*status означает,удалена запись (0) или нет (1)*/


/*запрос на вывод расписания по станции с датой и временем*/

use dbtrain;
select station.stationName, schedule.departureDate,
schedule.arrivalDate, train.arrivalStation,
train.trainNumber from station, schedule, train
where station.id = schedule.Station_id and schedule.Train_id = train.id
and schedule.Station_id = 1 and schedule.status = 1;

/*запрос на вывод расписания по станции только по времени*/
use dbtrain;
select station.stationName,
time(schedule.departureDate),
time(schedule.arrivalDate), train.arrivalStation,
train.trainNumber from station, schedule, train
where station.id = schedule.Station_id and schedule.Train_id = train.id
and schedule.Station_id = 1 and schedule.status = 1;

/*поиск поезда,проходящего от А до Б в заданный промежуток времени(без даты)*/

use dbtrain;
select station.stationName,
time(schedule.departureDate), time(schedule.arrivalDate),
train.arrivalStation, train.trainNumber
from station, schedule, train
where station.id = schedule.Station_id and schedule.Train_id = train.id
and station.stationName = 'Зеленая' and train.arrivalStation = 'Красная'
and ( TIME(schedule.departureDate) BETWEEN "15:00:00" AND "18:00:00" ) ;